#pragma once

#include "GameInfo.h"

class CGameManager
{
private:
	static bool	mLoop;
	HINSTANCE	mhInst = 0;
	HWND		mhWnd = 0;
	HDC			mhDC = 0;
	TCHAR		mClassName[256] = {};
	TCHAR		mTitleName[256] = {};

	std::list<FBullet>	mBulletList;
	FVector2D	mPlayerPos = { 150.f, 150.f };
	FVector2D	mPlayerSize = { 100.f, 100.f };

	std::list<FBullet>	mEnemyBulletList;
	float		mFireTime = 1.f;
	float		mFireAccTime = 0.f;
	FVector2D	mEnemyPos = { 1050.f, 150.f };
	FVector2D	mEnemySize = { 100.f, 100.f };
	float		mEnemyDir = 1.f;

public:
	bool Init(HINSTANCE hInst);
	int Run();

private:
	void Logic();
	void Input(float DeltaTime);
	void Update(float DeltaTime);
	void PostUpdate(float DeltaTime);
	void Collision(float DeltaTime);
	void PostCollisionUpdate(float DeltaTime);
	void Render(float DeltaTime);

private:
	void RegisterWindowClass();
	bool Create();

	static LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);

	DECLARE_SINGLE(CGameManager)
};

